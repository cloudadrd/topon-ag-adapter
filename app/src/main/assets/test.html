<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <style type="text/css">
      .wwimg{
        width: 100px;
        height: auto;
        display: block;
      }









    </style>
    <script type="text/javascript">


        function showVideo(){
            android.showAd("callbackfun");
        }

        function showInterstitial(){
            android.showInterstitial("callbackfunInterstitial");
        }

        function callbackfunInterstitial(posId,logType,ecpm){
            var desc=document.querySelector("#desc_inter");
            var msgStr="none";
            if(logType=="12"){
                msgStr = "插屏加载成功";

            }else if(logType=="5"){
                msgStr = "插屏曝光成功";

            }else if(logType=="6"){
                msgStr = "插屏播放完成关闭";

            }else if(logType=="7"){
                msgStr = "插屏广告点击";

            }else if(logType=="8"){
                msgStr = "视频奖励";

            }else if(logType=="11"){
                msgStr = "插屏播放失败";

            }else if(logType=="13"){
                msgStr = "插屏未加载";
            }
            desc.innerHTML = msgStr;
            android.printLog(msgStr);
        }

        function callbackfun(posid,logType,ecpm){
            var desc=document.querySelector("#desc");
            var msgStr="none";
            if(logType=="12"){
                msgStr = "视频加载成功";

            }else if(logType=="5"){
                msgStr = "视频曝光成功";

            }else if(logType=="6"){
                msgStr = "视频播放完成关闭";

            }else if(logType=="7"){
                msgStr = "视频广告点击";

            }else if(logType=="8"){
                msgStr = "视频奖励";

            }else if(logType=="11"){
                msgStr = "视频播放失败";

            }else if(logType=="13"){
                msgStr = "视频未加载";
            }

            desc.innerHTML = msgStr;

            android.printLog(msgStr);

        }

        function goBack(){
            android.goBack();
        }

        function xmActivityRefresh(){
            console.log("返回上一个页面刷新后，回调成功");
        }

        function takePhoto(){
            android.takePhoto();
        }

        function takeCamera(){
            android.takeCamera();
        }

        window.onload=function(){
              const upload_btn = document.querySelector('#upload_btn')
              const addImgFn = (url) => {
                let img = document.createElement('img')
                img.src = url
                img.setAttribute('class', 'wwimg')
                document.body.appendChild(img)
              }
              upload_btn.onchange = function (e) {
                const files = this.files
                for (const iterator of files) {
                  console.log(iterator)
                  const url = window.URL.createObjectURL(iterator)
                  console.log(url)
                  // 添加到body
                  addImgFn(url)
                }
              }
        }

       function download(){
            var params='{"url":"http://gamefilecdn.adspools.cn/downloadfile/app/xyct-release.apk","pkg":"com.restaurant.mobi"}'
            android.customCall(3,params)
        }

        function validateApk(){
            var params='{"pkg":"com.restaurant.mobi"}'
            android.customCall(5,params)
        }

        function notifyDownStated(pkg,state,progress){

            var str="pkg={0}，state={1},progress={2} ";
            switch(state){
                case 1:
                    str=str.format(pkg,"开始下载 "+state,progress);
                    break;
                case 2:
                    str=str.format(pkg,"开始中 "+state,progress);
                    break;
                case 3:
                    str=str.format(pkg,"下载成功 "+state,progress);
                    break;
                case 4:
                    str=str.format(pkg,"下载失败 "+state,progress);
                    break;
                case 5:
                    var params='{"pkg":"com.restaurant.mobi"}'
                    android.customCall(4,params)
                    str=str.format(pkg,"安装成功 "+state,progress);
                    break;
                case 6:
                    str=str.format(pkg,"已下载 "+state,progress);
                    break;
                case 7:
                    str=str.format(pkg,"已安装 "+state,progress);
                    break;
                case 8:
                    str=str.format(pkg,"未下载 "+state,progress);
                    break;
            }
            document.querySelector("#desc").innerHTML=str;

        }

        String.prototype.format = function(args) {
            var result = this;
            if (arguments.length < 1) {
                return result;
            }

            var data = arguments;		//如果模板参数是数组
            if (arguments.length == 1 && typeof (args) == "object") {
                //如果模板参数是对象
                data = args;
            }
            for (var key in data) {
                var value = data[key];
                if (undefined != value) {
                    result = result.replace("{" + key + "}", value);
                }
            }
            return result;
        }

    function customCalltest(){
        var params='{"pkg":"com.restaurant.mobi"}'
        android.customCall(4,params)
    }

    function toHref(){
        window.location.href='forumweb/task/index.html';
        window.location.reload="forumweb/task/index.html";
    }

    function wxBoundResult(params){
        document.querySelector("#desc").innerHTML=params;
    }


    function protobufResult(bytes){
        var arrayUint8=hexStr2Bytes(bytes);
        document.querySelector("#desc").innerHTML=arrayUint8.toString();
    }


    function hexStr2Bytes(hexString) {
        hexString = hexString.toUpperCase();
        var length = hexString.length / 2;
        var buff = new Uint8Array(length);
        for (i = 0; i < length; i++) {
            var pos = i * 2;
            buff[i] = charToByte(hexString.charAt(pos)) << 4 | charToByte(hexString.charAt(pos+1));
        }
        return buff;
    }

    function charToByte(c) {
        return "0123456789ABCDEF".charAt(c);
    }



    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

</head>

<body>

<div>
    <a href="forumweb/task/index.html">dianwo</a>
    <br>
    <button onclick="toHref()">check</button>
</div>
<br>
<br>

<div>
    <button onclick="showVideo()">showVideo</button>
</div>
<br>
<br>
<div>
    <button onclick="showInterstitial()">showInterstitial</button>
</div>
<br>
<div>
    <!--    <input class="upload-input"  accept="image/*" multiple required type="file">-->
    <input type="file" accept="image/*" multiple="multiple" name="" id="upload_btn">
</div>

<br>
<div>
    <button onclick="goBack()">goBack</button>
</div>
<br>
<div>
    <button onclick="download()">下载</button>
</div>
<br>
<div>
    <button onclick="javascript:customCalltest()">安装</button>
</div>
<br>
<div>
    <button onclick="validateApk()">检测apk状态</button>
</div>

<div>
    <button onclick="android.customCall(8,'')">绑定微信</button>
</div>

<div>
    <button onclick="android.requestProtobuf()">请求ProtoBuf数据</button>
</div>

<br><br>
<div id="desc">未显示</div>

<br><br>
<div id="desc_inter">插屏未显示</div>

<br>
</body>

</html>